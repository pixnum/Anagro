<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anagro - Anagram Generator</title>
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2920/2920242.png">
<style>
:root {
  --bg-color: #e0e0e0;
  --text-color: #333;
  --card-color: #e0e0e0;
  --shadow-light: #ffffff;
  --shadow-dark: #babecc;
  --accent-color: #6c63ff;
}
[data-theme="dark"] {
  --bg-color: #2c2c2c;
  --text-color: #eee;
  --card-color: #2c2c2c;
  --shadow-light: #3a3a3a;
  --shadow-dark: #141414;
  --accent-color: #bb86fc;
}
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: var(--bg-color);
  color: var(--text-color);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  transition: all 0.3s;
}
.frame {
  position: relative; /* required for absolute positioning */
  border: 3px solid var(--shadow-dark);
  border-radius: 25px;
  padding: 20px;
  max-width: 500px;
  width: 95%;
  background: var(--card-color);
  box-shadow: 10px 10px 30px var(--shadow-dark), -10px -10px 30px var(--shadow-light);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  transition: all 0.3s;
}
.dark-toggle-container {
  position: absolute;
  top: 20px;
  right: 20px;
  display: flex;
  align-items: center;
  gap: 5px;
}
.header h1 { margin: 0; font-size: 2rem; text-align: center; width: 100%; }
textarea, select {
  width: 90%;
  padding: 12px;
  border-radius: 15px;
  border: none;
  outline: none;
  background: var(--card-color);
  box-shadow: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
  color: var(--text-color);
  font-size: 1.1rem;
}
textarea { height: 60px; resize: none; }
.results {
  width: 90%;
  max-height: 200px;
  overflow-y: auto;
  padding: 12px;
  border-radius: 15px;
  background: var(--card-color);
  box-shadow: inset 5px 5px 10px var(--shadow-dark), inset -5px -5px 10px var(--shadow-light);
  text-align: left;
  font-size: 1.1rem;
  line-height: 1.4;
}
.buttons {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 90%;
}
button {
  padding: 12px;
  border-radius: 15px;
  border: none;
  background: var(--card-color);
  box-shadow: 5px 5px 15px var(--shadow-dark), -5px -5px 15px var(--shadow-light);
  color: var(--text-color);
  font-size: 1rem;
  cursor: pointer;
  transition: 0.2s;
}
button:hover { box-shadow: inset 5px 5px 15px var(--shadow-dark), inset -5px -5px 15px var(--shadow-light); }
footer { font-size: 0.8rem; opacity: 0.7; text-align:center; }

/* Toggle styles */
.toggle-row {
  display: flex;
  justify-content: space-between;
  width: 90%;
  margin-bottom: 10px;
}
.toggle-group {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  flex: 1;
}
/* Round Switch */
.switch { position: relative; display: inline-block; width: 50px; height: 24px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
  position: absolute;
  cursor: pointer;
  top:0; left:0; right:0; bottom:0;
  background-color: var(--card-color);
  border-radius: 24px;
  box-shadow: inset 3px 3px 6px var(--shadow-dark), inset -3px -3px 6px var(--shadow-light);
  transition: 0.3s;
}
.slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: var(--text-color);
  border-radius: 50%;
  transition: 0.3s;
}
input:checked + .slider { background-color: var(--accent-color); }
input:checked + .slider:before { transform: translateX(26px); }
</style>
</head>
<body data-theme="light">
<div class="frame">
  <!-- Dark Mode toggle upper-right corner -->
  <div class="dark-toggle-container">
    <label class="switch">
      <input type="checkbox" id="darkToggle">
      <span class="slider"></span>
    </label>
    <span style="font-size:0.8rem;">Dark Mode</span>
  </div>

  <div class="header"><h1>ðŸ”„ Anagro</h1></div>

  <textarea id="wordInput" placeholder="Enter letters only"></textarea>
  
  <!-- Horizontal toggles row -->
  <div class="toggle-row">
    <div class="toggle-group">
      <label class="switch"><input type="checkbox" id="realtimeToggle" checked><span class="slider"></span></label>
      <span>Real-Time</span>
    </div>
    <div class="toggle-group">
      <label class="switch"><input type="checkbox" id="shuffleToggle"><span class="slider"></span></label>
      <span>Shuffle</span>
    </div>
    <div class="toggle-group">
      <label class="switch"><input type="checkbox" id="uniqueToggle" checked><span class="slider"></span></label>
      <span>Unique</span>
    </div>
  </div>

  <label for="lengthFilter">Word Length Filter:</label>
  <select id="lengthFilter">
    <option value="all">All</option>
    <option value="2">2 Letters</option>
    <option value="3">3 Letters</option>
    <option value="4">4 Letters</option>
    <option value="5">5 Letters</option>
    <option value="6">6 Letters</option>
    <option value="7">7 Letters</option>
    <option value="8">8 Letters</option>
    <option value="9">9 Letters</option>
    <option value="10">10 Letters</option>
  </select>

  <label for="numAnagrams">Max Anagrams:</label>
  <select id="numAnagrams">
    <option value="10">10</option>
    <option value="50">50</option>
    <option value="100" selected>100</option>
    <option value="500">500</option>
    <option value="1000">1000</option>
  </select>
  
  <div class="buttons">
    <button onclick="generateAnagrams(true)">Generate Anagram</button>
    <button onclick="stopGeneration()">Stop</button>
    <button onclick="clearAll()">Clear</button>
    <button onclick="copyToClipboard()">Copy</button>
    <button onclick="downloadAnagrams()">Download</button>
  </div>
  
  <div id="counter">Generated: 0</div>
  <div class="results" id="result"></div>
  
  <footer>Â© Anagro 2025</footer>
</div>

<script>
let stopFlag = false;

function generatePermutations(str, lengthFilter, uniqueOnly, shuffle) {
    stopFlag = false;
    const results = new Set();
    const arr = str.split('');

    function permute(array, start = 0) {
        if (stopFlag) return;
        if (start === array.length - 1) {
            const word = array.join('');
            if ((lengthFilter === 'all' || word.length == parseInt(lengthFilter)) && 
                (!uniqueOnly || !results.has(word))) {
                results.add(word);
            }
        } else {
            for (let i = start; i < array.length; i++) {
                [array[start], array[i]] = [array[i], array[start]];
                permute(array, start + 1);
                [array[start], array[i]] = [array[i], array[start]];
            }
        }
    }

    permute(arr);
    let finalResults = Array.from(results);
    if (shuffle) finalResults.sort(() => Math.random() - 0.5);
    return finalResults;
}

function updateResults(words, maxCount) {
    const resultDiv = document.getElementById('result');
    const counterEl = document.getElementById('counter');
    resultDiv.innerHTML = '';
    words.slice(0, maxCount).forEach((w, i) => {
        const div = document.createElement('div');
        div.textContent = w;
        resultDiv.appendChild(div);
    });
    counterEl.textContent = `Generated: ${Math.min(words.length, maxCount)}`;
}

function generateAnagrams(manual = false) {
    const wordInput = document.getElementById('wordInput').value.trim();
    const lengthFilter = document.getElementById('lengthFilter').value;
    const uniqueOnly = document.getElementById('uniqueToggle').checked;
    const shuffle = document.getElementById('shuffleToggle').checked;
    const maxCount = parseInt(document.getElementById('numAnagrams').value);

    if (!wordInput.match(/^[a-zA-Z]+$/)) {
        alert('Enter letters only!');
        return;
    }
    if (wordInput.length > 10) {
        alert('Max 10 letters allowed!');
        return;
    }

    const words = generatePermutations(wordInput.toLowerCase(), lengthFilter, uniqueOnly, shuffle);
    updateResults(words, maxCount);
}

document.getElementById('wordInput').addEventListener('input', () => {
    if (document.getElementById('realtimeToggle').checked) {
        generateAnagrams(false);
    }
});

function stopGeneration() { stopFlag = true; }
function clearAll() {
    stopFlag = true;
    document.getElementById('wordInput').value = '';
    document.getElementById('result').innerHTML = '';
    document.getElementById('counter').textContent = 'Generated: 0';
}
function copyToClipboard() {
    const text = Array.from(document.getElementById('result').children).map(d => d.textContent).join('\n');
    if (!text) return alert('Nothing to copy!');
    navigator.clipboard.writeText(text).then(() => alert('Copied!'));
}
function downloadAnagrams() {
    const text = Array.from(document.getElementById('result').children).map(d => d.textContent).join('\n');
    if (!text) return alert('No anagrams to download!');
    const blob = new Blob([text], { type: 'text/plain' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'anagrams.txt';
    link.click();
}
document.getElementById('darkToggle').addEventListener('change', () => {
    document.body.setAttribute('data-theme', document.getElementById('darkToggle').checked ? 'dark' : 'light');
});
</script>
</body>
</html>
